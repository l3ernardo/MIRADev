<link href="/public/css/jquery.treetable.css" rel="stylesheet" type="text/css" />
<link href="./css/style.css" rel="stylesheet" type="text/css" />
<link href="./css/jquery.dataTables.css" rel="stylesheet" type="text/css">
<script src="./lib/jquery.dataTables.js"></script>
<script src="./js/accesssummary.js"></script>
<script src="./js/utility.js"></script>


<div class="ibm-container" style="width:100%">
	<div class="ibm-container-body">
		<span><br/></span>
		<div id="eventLinks" name="eventLinks" class="ibm-buttons-row">
			<p>
				<span class="ibm-sep"> </span>
				<a href="javascript:void(0);" value="Export to Excel" name="lnk_exportxls" id="lnk_exportxls" class="ibm-symp-spreadsheet">Export to Excel</a>
				<span class="ibm-sep"> </span>
				<a href="javascript:void(0);" value="Export to Open Office" name="lnk_exportods" id="lnk_exportods" class="ibm-symp-spreadsheet">Export to Open Office</a>
			</p>
			<br/>
		</div>
		<textarea name="textarea" id="dataForExport" cols="100" style="display:none">valuesToString List</textarea>
		<div >
		
			<table id="accesssummary_treeview"  cellspacing="0" cellpadding="0" border="0" class="mira-dashboard-table" >
				<thead>
					<tr> 
					    <th  scope="col"  >Select<input  type="checkbox" class="mira_checkbox_tree" id="mira_checkbox_tree" name="mira_checkbox "/></th>
					    <th  id="th1"  >User</th>
						<th id="th2" >Type</th>
						<th id="th3" >Assessable Unit (WWBCIT blue/Mira green)</th>
						<th id="th4" >Status</th>
						<th id="th5" >Addional Editors</th>
						<th id="th6" >Addional Readers</th>
						<th id="th7" >Owners</th>
						<th id="th8" >Focals</th>
						<th id="th9" >Coordinators</th>
						<th id="th10" >Readers</th>
						<th id="th11" >BU IOT</th>
						<th id="th12" >BU IMT</th>
						<th id="th13" >Country</th>
						<th >ID</th>
						<th >Parent</th>
						
					</tr>
				</thead>
		
			</table>
		</div>
	</div>

</div>


<script>
	//Load document's name
	$(document).ready(function() {
	
	$('h1#pageTitle').text("Explicit Access Summary");
	
		$('#accesssummary_treeview').DataTable({
			select: true,
			"paginate": false,
			"processing": true,
			"serverSide": true,
			"ajax": "../dataFeedAccessSummary",
			"scrollX": true,
			"searching": false,
			"ordering": false,
			  "columnDefs": [
            {
                "targets": [ 15 ],
                "visible": false,
                "searchable": false
            },
            {
                "targets": [ 14 ],
                "visible": false,
                "searchable": false
            },
            {
                "targets": [ 16 ],
                "visible": false
            }
        ],
			"scrollY": 280,
			"fnInitComplete": function(oSettings, json) {
      	
      		$("#accesssummary_treeview").treetable({expandable: true });
    		},
			
			
			"fnRowCallback": function( nRow, aData, iDisplayIndex, iDisplayIndexFull ) {
			        $(nRow).attr('data-tt-id', aData[15]);//added tree id and parents for tree view
			        $(nRow).attr('data-tt-parent-id', aData[16]);//added tree id and parents for tree view
			        $('td:eq(0)', nRow).html('<input type="checkbox" id="invidual_checkbox_tree" class="mira_checkbox_tree"/>');
			        $('td:eq(0)', nRow).attr('scope', 'row');
			        /*
			        if(aData[14] == "WWBCIT"){ //adding colors
			        	$('td:eq(1)', nRow).attr('style', "background-color: #C0E1FF");
			        	$('td:eq(2)', nRow).attr('style', "background-color: #C0E1FF");
			        	$('td:eq(3)', nRow).attr('style', "background-color: #C0E1FF");
			        	$('td:eq(4)', nRow).attr('style', "background-color: #C0E1FF");
			        	$('td:eq(5)', nRow).attr('style', "background-color: #C0E1FF");
			        	$('td:eq(6)', nRow).attr('style', "background-color: #C0E1FF");
			        	$('td:eq(7)', nRow).attr('style', "background-color: #C0E1FF");
			        	$('td:eq(8)', nRow).attr('style', "background-color: #C0E1FF");
			        	$('td:eq(9)', nRow).attr('style', "background-color: #C0E1FF");
			        	$('td:eq(10)', nRow).attr('style', "background-color: #C0E1FF");
			        	$('td:eq(11)', nRow).attr('style', "background-color: #C0E1FF");
			        	$('td:eq(12)', nRow).attr('style', "background-color: #C0E1FF");
			        	} 
			        if(aData[14] == "Mira"){
			        	$('td:eq(1)', nRow).attr('style', "background-color: #C2FF91");
			        	$('td:eq(2)', nRow).attr('style', "background-color: #C2FF91");
			        	$('td:eq(3)', nRow).attr('style', "background-color: #C2FF91");
			        	$('td:eq(4)', nRow).attr('style', "background-color: #C2FF91");
			        	$('td:eq(5)', nRow).attr('style', "background-color: #C2FF91");
			        	$('td:eq(6)', nRow).attr('style', "background-color: #C2FF91");
			        	$('td:eq(7)', nRow).attr('style', "background-color: #C2FF91");
			        	$('td:eq(8)', nRow).attr('style', "background-color: #C2FF91");
			        	$('td:eq(9)', nRow).attr('style', "background-color: #C2FF91");
			        	$('td:eq(10)', nRow).attr('style', "background-color: #C2FF91");
			        	$('td:eq(11)', nRow).attr('style', "background-color: #C2FF91");
			        	$('td:eq(12)', nRow).attr('style', "background-color: #C2FF91");
			        	}
			     */
				
			    }
			
		});
		

	});
	
</script>
